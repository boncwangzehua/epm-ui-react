/*!
 * epm-ui-simple-spring-boot - EPM UI Spring Boot Simple
 * @version v0.2.0
 * @link http://www.bonc.com.cn
 * Copyright (C) 2017 BONC All rights reserved.
 */
!function(e,t){if("function"==typeof define&&define.amd)define("EPMUIPage",["exports","react","epm-ui"],t);else if("undefined"!=typeof exports)t(exports,require("react"),require("epm-ui"));else{var a={exports:{}};t(a.exports,e.React,e.EPMUI),e.EPMUIPage=a.exports}}(this,function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0}),e.Search=void 0;var o=function(e){return e&&e.__esModule?e:{default:e}}(t),r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=function(e){function t(e){n(this,t);var u=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return u.handleSearch=u.handleSearch.bind(u),u.handleAdd=u.handleAdd.bind(u),u.handleChange=u.handleChange.bind(u),u.handlePageChange=u.handlePageChange.bind(u),u.handleClose=u.handleClose.bind(u),u.state={total:e.total,pageIndex:1,InputValue:"",formData:{id:"",name:"",age:"",job:"",telephone:"",address:""},visible:!1,requestPath:a.context.contextPath+"/tableData?index=1&size=5"},u}return u(t,e),r(t,[{key:"fetchPageTotal",value:function(){var e=this;fetch&&fetch(a.context.contextPath+"/getTableRows",{credentials:"same-origin"}).then(function(e){return e.json()}).then(function(t){e.setState({total:t})})}},{key:"handleSearch",value:function(){var e=this;console.log(a.context.contextPath+"/index"),this.setState(function(t,n){return{requestPath:a.context.contextPath+"/tableData?index=1&size=5&requestPath="+e.state.InputValue}},function(){e.fetchPageTotal()})}},{key:"handleChange",value:function(e){this.setState({InputValue:e})}},{key:"handlePageChange",value:function(e,t){this.setState({pageIndex:e,requestPath:a.context.contextPath+"/tableData?index="+e+"&size="+t+"&requestPath="+this.state.InputValue})}},{key:"handleUpdate",value:function(e){this.setState({visible:!this.state.visible,formData:{id:e.id,name:e.name,age:e.age,job:e.job,telephone:e.telephone,address:e.address}})}},{key:"handleDelete",value:function(e,t){confirm("确定要删除"+t+"吗")&&this.setState({requestPath:a.context.contextPath+"/tableData?index="+this.state.pageIndex+"&size=5&requestPath="+this.state.InputValue+"&id="+e})}},{key:"handleAdd",value:function(){this.setState({formData:{name:"",age:"",job:"",telephone:"",address:""},visible:!this.state.visible})}},{key:"handleClose",value:function(){console.log(this.state.visible),this.setState({visible:!this.state.visible})}},{key:"render",value:function(){var e=this;return o.default.createElement(a.Page,null,o.default.createElement(a.Container,{type:"fixed"},o.default.createElement(a.Divider,null),o.default.createElement(a.Row,null,o.default.createElement(a.Col,{size:10},o.default.createElement(a.Label,null,"搜索框"),o.default.createElement(a.Input,{placeholder:"请输入搜索内容",type:"search",name:"search",onChange:this.handleChange}),o.default.createElement(a.Button,{type:"default",onClick:this.handleSearch},"搜索"),o.default.createElement(a.Button,{type:"default",onClick:this.handleAdd},"增加"))),o.default.createElement(a.Divider,null),o.default.createElement(a.Modal,{visible:this.state.visible,onClose:this.handleClose},o.default.createElement(a.ModalBody,null,o.default.createElement(a.Form,{method:"post",action:a.context.contextPath+"/submitData"},o.default.createElement(a.FormItem,null,o.default.createElement(a.Input,{type:"text",name:"id",value:this.state.formData.id})),o.default.createElement(a.FormItem,null,o.default.createElement(a.Label,null,"姓名"),o.default.createElement(a.Input,{type:"text",name:"name",value:this.state.formData.name})),o.default.createElement(a.FormItem,null,o.default.createElement(a.Label,null,"年龄"),o.default.createElement(a.Input,{type:"text",name:"age",value:this.state.formData.age})),o.default.createElement(a.FormItem,null,o.default.createElement(a.Label,null,"工作"),o.default.createElement(a.Input,{type:"text",name:"job",value:this.state.formData.job})),o.default.createElement(a.FormItem,null,o.default.createElement(a.Label,null,"电话"),o.default.createElement(a.Input,{type:"text",name:"telephone",value:this.state.formData.telephone})),o.default.createElement(a.FormItem,null,o.default.createElement(a.Label,null,"地址"),o.default.createElement(a.Input,{type:"text",name:"address",value:this.state.formData.address})),o.default.createElement(a.Button,{type:"primary",htmlType:"submit",onClick:this.handleClose},"提交"),o.default.createElement(a.Button,{type:"default",onClick:this.handleClose},"取消")))),o.default.createElement(a.Row,null,o.default.createElement(a.Col,{size:10},o.default.createElement(a.Table,{dataSource:this.state.requestPath,fixed:!0},o.default.createElement(a.Column,{title:"姓名",dataIndex:"name"}),o.default.createElement(a.Column,{title:"年龄",dataIndex:"age"}),o.default.createElement(a.Column,{title:"工作",dataIndex:"job"}),o.default.createElement(a.Column,{title:"电话",dataIndex:"telephone"}),o.default.createElement(a.Column,{title:"地址",dataIndex:"address"}),o.default.createElement(a.Column,{title:"操作"},function(t){return o.default.createElement("div",null,o.default.createElement(a.Button,{type:"primary",onClick:e.handleUpdate.bind(e,t)},"修改"),o.default.createElement(a.Button,{type:"danger",onClick:e.handleDelete.bind(e,t.id,t.name)},"删除"))})))),o.default.createElement(a.Divider,null),o.default.createElement(a.Row,null,o.default.createElement(a.Col,{size:4}),o.default.createElement(a.Col,{size:8},o.default.createElement(a.Pagination,{index:this.state.pageIndex,total:this.state.total,pages:5,size:5,onChange:this.handlePageChange})))))}}]),t}(t.Component);e.default=i,e.Search=i});